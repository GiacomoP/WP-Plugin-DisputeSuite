(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _Step=require('./Step.es6');var _Step2=_interopRequireDefault(_Step);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}var App=function(){function App(){_classCallCheck(this,App);this.currentStep=null}_createClass(App,[{key:'run',value:function run(){this.currentStep=_Step2.default.retrieveLoadedStep()}}]);return App}();exports.default=App;

},{"./Step.es6":3}],2:[function(require,module,exports){
(function (global){
'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _typeof=typeof Symbol==='function'&&typeof Symbol.iterator==='symbol'?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==='function'&&obj.constructor===Symbol?'symbol':typeof obj};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{return get(parent,property,receiver)}}else if('value'in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}};var _jquery=(typeof window !== "undefined" ? window['jQuery'] : typeof global !== "undefined" ? global['jQuery'] : null);var _jquery2=_interopRequireDefault(_jquery);var _dsConfig=(typeof window !== "undefined" ? window['dsConfig'] : typeof global !== "undefined" ? global['dsConfig'] : null);var _dsConfig2=_interopRequireDefault(_dsConfig);var _Step2=require('./Step.es6');var _Step3=_interopRequireDefault(_Step2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called')}return call&&(typeof call==='object'||typeof call==='function')?call:self}function _inherits(subClass,superClass){if(typeof superClass!=='function'&&superClass!==null){throw new TypeError('Super expression must either be null or a function, not '+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var ClientInfoStep=function(_Step){_inherits(ClientInfoStep,_Step);function ClientInfoStep(){_classCallCheck(this,ClientInfoStep);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(ClientInfoStep).call(this));_this.formEl=(0,_jquery2.default)('form.ds-client-info');_this.buttonEl=_this.formEl.find('button[type="submit"]');_this.errorsEl=_this.formEl.find('.error-container .error');_this._savedButtonEl=null;_this._setHandlers();return _this}_createClass(ClientInfoStep,[{key:'_setHandlers',value:function _setHandlers(){_get(Object.getPrototypeOf(ClientInfoStep.prototype),'_setHandlers',this).call(this);var me=this,onAjaxFail=function onAjaxFail(msg){var out='An error has occurred. If the problem persists please contact us.';if(typeof msg!=='undefined'){out='An error has occurred:\n\n'+msg}me.buttonEl.replaceWith(me._savedButtonEl);alert(out)},onAjaxDone=function onAjaxDone(res){if((typeof res==='undefined'?'undefined':_typeof(res))==='object'&&'action'in res){if(res['action']==='ask-secondary'){window.location.reload()}else if(res['action']==='location'&&'url'in res){window.location=res['url']}}else if((typeof res==='undefined'?'undefined':_typeof(res))==='object'&&'error'in res){onAjaxFail(res['error'])}else{onAjaxFail()}};this.formEl.on('submit',function(e){e.preventDefault();if(!(0,_jquery2.default)(this).valid()){return}me._savedButtonEl=me.buttonEl.replaceWith(me.loadingEl);me.buttonEl=me.loadingEl;_jquery2.default.ajax({method:'POST',url:_dsConfig2.default.ajaxUrl,data:{'action':'saveCustomer','formData':(0,_jquery2.default)(this).serialize()},cache:false}).done(onAjaxDone).fail(onAjaxFail)});this.formEl.validate({invalidHandler:function invalidHandler(form,validator){var errors=validator.numberOfInvalids();if(errors){var message=errors===1?'You missed 1 required field. It has been highlighted.':'You missed '+errors+' required fields. They have been highlighted.';me.errorsEl.text(message);me.errorsEl.show()}else{me.errorsEl.hide()}},showErrors:function showErrors(){}})}}]);return ClientInfoStep}(_Step3.default);exports.default=ClientInfoStep;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"./Step.es6":3}],3:[function(require,module,exports){
(function (global){
'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _jquery=(typeof window !== "undefined" ? window['jQuery'] : typeof global !== "undefined" ? global['jQuery'] : null);var _jquery2=_interopRequireDefault(_jquery);var _dsConfig=(typeof window !== "undefined" ? window['dsConfig'] : typeof global !== "undefined" ? global['dsConfig'] : null);var _dsConfig2=_interopRequireDefault(_dsConfig);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}var Step=function(){function Step(){_classCallCheck(this,Step);this.loadingEl=(0,_jquery2.default)('<img src="'+_dsConfig2.default.pluginUrl+'/assets/images/spinner.gif" alt="Loading" class="loading">')}_createClass(Step,[{key:'_setHandlers',value:function _setHandlers(){if((0,_jquery2.default)('form').length){(0,_jquery2.default)('input[data-mask]').each(function(){(0,_jquery2.default)(this).mask((0,_jquery2.default)(this).attr('data-mask'))})}}}],[{key:'retrieveLoadedStep',value:function retrieveLoadedStep(){var identifier=(0,_jquery2.default)('.ds-step-identifier'),step=null;if(!identifier.length){return null}switch(identifier.attr('data-step')){case'client-info':var ClientInfoStep=require('./ClientInfoStep.es6').default;step=new ClientInfoStep;break;default:throw new Error('The current Step "'+identifier.attr['data-step']+'" is not supported.');break;}return step}}]);return Step}();exports.default=Step;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"./ClientInfoStep.es6":2}],4:[function(require,module,exports){
'use strict';var _App=require('./App.es6');var _App2=_interopRequireDefault(_App);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var app=new _App2.default;app.run();

},{"./App.es6":1}]},{},[4]);
